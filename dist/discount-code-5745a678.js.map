{"version":3,"file":"discount-code-5745a678.js","mappings":"iQA4BA,cAIE,WAAYA,GAAZ,MACE,YAAMA,IAAM,K,OACZ,EAAKC,OAAQ,gCACR,EAAKA,OAAK,CACbC,aAAcF,EAAMG,YAAc,K,CAEtC,CA4JF,OAtK2B,oBAYzB,YAAAC,OAAA,e,IAAA,OACQ,EAOFC,KAAKL,MANPG,EAAU,aACVG,EAAW,cACXC,EAAgB,mBAChBC,EAAgB,mBAChBC,EAAW,cACXC,EAAY,eA0Bd,OACE,uBAAKC,UAAU,8BACb,uBAAKA,UAAU,iBACZN,KAAKL,MAAMY,UACV,uBAAKD,UAAU,2BACb,uBAAKA,UAAU,uBACb,uBACEE,MAAO,CACLC,MAAO,OACPC,QAAS,OACTC,eAAgB,gBAChBC,WAAY,WAGd,gBAACC,EAAA,EAAgB,CAACC,GAAG,4BACrB,uBAAKR,UAAU,oCACVL,GACD,2BACE,uBACEO,MAAO,CACLO,MAAO,UACPN,MAAO,OACPO,OAAQ,OACRC,OAAQ,oBACRC,aAAc,MACdR,QAAS,OACTE,WAAY,SACZD,eAAgB,WACjB,OAMLT,GAAoBC,IAAqB,uBAAKG,UAAU,cACvDR,KAAgBI,IAAqBC,IACtC,gBAACgB,EAAA,EAAS,CACRC,oBAAqB,IACnB,qBACA,yBACA,CACE,iCAAkCtB,WAQ7CA,GACD,uBAAKQ,UAAU,+BACb,uBAAKA,UAAU,iCACb,uBAAKA,UAAU,6BACb,gBAACO,EAAA,EAAgB,CAACC,GAAG,mCAEvB,yBACER,UAAU,sBACVe,UAAU,EACVC,SAAU,SAACC,GAAM,SAAKC,SAAS,CAAE3B,aAAc0B,EAAEE,OAAOC,OAAvC,EACjBC,KAAK,OACLD,MAAO5B,KAGX,uBAAKQ,UAAU,kCACVR,GACD,2BACE,0BAAQQ,UAAU,uBAAuBsB,QA1E5B,SAACC,GAChCA,EAAMC,iBAEE,IAAAhC,EAAe,EAAKH,MAAK,WAEjCU,EAAaP,EACf,GAoE8F,cAQlFA,GACA,uBAAKQ,UAAU,+BACb,uBAAKA,UAAU,iCACb,uBAAKA,UAAU,6BACb,gBAACO,EAAA,EAAgB,CAACC,GAAG,mCAEvB,yBACER,UAAU,sBACVe,SAAUlB,GAAoBD,EAC9BoB,SAAU,SAACC,GAAM,SAAKC,SAAS,CAAE3B,aAAc0B,EAAEE,OAAOC,OAAvC,EACjBC,KAAK,OACLD,MAAO1B,KAAKJ,MAAMC,eAA0B,QAAV,EAAAG,KAAKL,aAAK,eAAEG,aAAc,MAGhE,uBAAKQ,UAAU,kCACVN,KAAKJ,MAAMC,eAAiBC,GAC7B,0BACEQ,UAAU,uBACVe,SAAUlB,GAAoBD,EAC9B0B,QApHa,SAAOC,GAAU,kD,yEAChDA,EAAMC,iBAEEjC,EAAiBG,KAAKJ,MAAK,a,iBAGjC,O,sBAAA,GAAMQ,EAAYP,I,cAAlB,SAEAG,KAAKwB,SAAS,CAAE3B,aAAcC,I,+BAG9BiC,QAAQC,MAAM,WAAY,G,gCAyGuB,gBAQxC/B,GACD,uBACEO,MAAO,CACLC,MAAO,OACPM,MAAO,MACPkB,SAAU,OACVC,YAAa,SACbC,WAAY,SACZC,aAAc,WAGhB,2BAAuB,QAAjB,EAAAnC,aAAW,EAAXA,EAAaoC,YAAI,eAAEC,WAQzC,EACF,EAtKA,CAA2B,EAAAC,WAwKpB,SAASC,EAAuB,G,QACrCC,EAAe,kBACfC,EAAa,gBAGX,EAGEA,EAAa,KAHPC,EAAU,aAAEC,EAAW,cAC/B,EAEEF,EAAa,SAFHxC,EAAgB,mBAAEC,EAAgB,mBAC9C,EACEuC,EAAa,OADLG,EAAmB,sBAAEC,EAAoB,uBAGrD,MAAO,CACLhD,WAAuD,QAA3C,EAAY,QAAZ,EAAA6C,WAAY,eAAEI,MAAK,SAACC,GAAW,OAAAA,EAAOC,IAAP,WAAY,eAAEA,KACzD1C,SAAUqC,IACV3C,YAAa4C,KAAyBC,IACtC5C,iBAAkBA,IAClBC,iBAAkBA,IAClBC,YAAaqC,EAAgBrC,YAC7BC,aAAcoC,EAAgBpC,aAElC,CAEA,SAAe,EAAA6C,EAAA,IAAc,EAAAC,EAAA,IAAa,EAAAC,EAAA,GAAaZ,EAAb,CAAqCa,I","sources":["webpack://checkout/./packages/core/src/app/cart/discount-code/DiscountCode.tsx"],"sourcesContent":["import { CheckoutSelectors } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { Component, ReactNode } from 'react';\n\nimport { TranslatedString, withLanguage, WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { CheckoutContextProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { withAnalytics } from '../../analytics';\nimport { withCheckout } from '../../checkout';\nimport { CheckoutState, WithCheckoutProps } from '../../checkout/Checkout';\nimport { IconCheck } from '../../ui/icon';\n\nimport './DiscountCode.scss';\n\ninterface DiscountCodeState {\n  discountCode: string;\n}\n\ninterface DiscountCodeProps {\n  couponCode: any;\n  checkout: any;\n  couponError: any;\n  isRemovingCoupon: boolean;\n  isApplyingCoupon: boolean;\n  applyCoupon: (couponCode: string) => Promise<CheckoutSelectors>;\n  removeCoupon(code: string): void;\n}\n\nclass DiscountCode extends Component<\n  WithCheckoutProps & WithLanguageProps & DiscountCodeProps,\n  CheckoutState & DiscountCodeState\n> {\n  constructor(props: WithCheckoutProps & WithLanguageProps & DiscountCodeProps) {\n    super(props);\n    this.state = {\n      ...this.state,\n      discountCode: props.couponCode || '',\n    };\n  }\n\n  render(): ReactNode {\n    const {\n      couponCode,\n      couponError,\n      isRemovingCoupon,\n      isApplyingCoupon,\n      applyCoupon,\n      removeCoupon,\n    } = this.props;\n\n    const handleSubmitDiscountCode = async (event: any) => {\n      event.preventDefault();\n\n      const { discountCode } = this.state;\n\n      try {\n        await applyCoupon(discountCode);\n\n        this.setState({ discountCode: couponCode });\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error('error : ', error);\n      }\n    };\n\n    const handleRemoveDiscountCode = (event: any) => {\n      event.preventDefault();\n\n      const { couponCode } = this.props;\n\n      removeCoupon(couponCode);\n    };\n\n    return (\n      <div className='checkout-discount-wrapper\"'>\n        <div className=\"discount-code\">\n          {this.props.checkout && (\n            <div className=\"discount-code-container\">\n              <div className=\"discount-code-label\">\n                <div\n                  style={{\n                    width: '100%',\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                  }}\n                >\n                  <TranslatedString id=\"cart.discountCode.title\" />\n                  <div className=\"discount-code-status-container\">\n                    {!!couponError && (\n                      <div>\n                        <div\n                          style={{\n                            color: '#FF0000',\n                            width: '2rem',\n                            height: '2rem',\n                            border: '1px solid #FF0000',\n                            borderRadius: '50%',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                        >\n                          !\n                        </div>\n                      </div>\n                    )}\n                    {(isRemovingCoupon || isApplyingCoupon) && <div className=\"spinner\" />}\n                    {!!couponCode && (!isRemovingCoupon || !isApplyingCoupon) && (\n                      <IconCheck\n                        additionalClassName={classNames(\n                          'stepHeader-counter',\n                          'optimizedCheckout-step',\n                          {\n                            'stepHeader-counter--complete': !!couponCode,\n                          },\n                        )}\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n              {!!couponCode && (\n                <div className=\"discount-code-input-wrapper\">\n                  <div className=\"discount-code-input-container\">\n                    <div className=\"discount-code-input-lable\">\n                      <TranslatedString id=\"cart.discountCode.placeholder\" />\n                    </div>\n                    <input\n                      className=\"discount-code-input\"\n                      disabled={true}\n                      onChange={(e) => this.setState({ discountCode: e.target.value })}\n                      type=\"text\"\n                      value={couponCode}\n                    />\n                  </div>\n                  <div className=\"discount-code-button-wrapper\">\n                    {!!couponCode && (\n                      <div>\n                        <button className=\"discount-code-button\" onClick={handleRemoveDiscountCode}>\n                          Remove\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n              {!couponCode && (\n                <div className=\"discount-code-input-wrapper\">\n                  <div className=\"discount-code-input-container\">\n                    <div className=\"discount-code-input-lable\">\n                      <TranslatedString id=\"cart.discountCode.placeholder\" />\n                    </div>\n                    <input\n                      className=\"discount-code-input\"\n                      disabled={isApplyingCoupon || isRemovingCoupon}\n                      onChange={(e) => this.setState({ discountCode: e.target.value })}\n                      type=\"text\"\n                      value={this.state.discountCode || this.props?.couponCode || ''}\n                    />\n                  </div>\n                  <div className=\"discount-code-button-wrapper\">\n                    {!!this.state.discountCode && !couponCode && (\n                      <button\n                        className=\"discount-code-button\"\n                        disabled={isApplyingCoupon || isRemovingCoupon}\n                        onClick={handleSubmitDiscountCode}\n                      >\n                        Validate\n                      </button>\n                    )}\n                  </div>\n                </div>\n              )}\n              {!!couponError && (\n                <div\n                  style={{\n                    width: '100%',\n                    color: 'red',\n                    fontSize: '10px',\n                    paddingLeft: '1.5rem',\n                    paddingTop: '0.5rem',\n                    paddingRight: '1.5rem',\n                  }}\n                >\n                  <div>{couponError?.body?.detail}</div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport function mapToDisCountCodeProps({\n  checkoutService,\n  checkoutState,\n}: CheckoutContextProps): DiscountCodeProps {\n  const {\n    data: { getCoupons, getCheckout },\n    statuses: { isRemovingCoupon, isApplyingCoupon },\n    errors: { getApplyCouponError, getRemoveCouponError },\n  } = checkoutState;\n\n  return {\n    couponCode: getCoupons()?.find((coupon) => coupon.code)?.code,\n    checkout: getCheckout(),\n    couponError: getApplyCouponError() || getRemoveCouponError(),\n    isRemovingCoupon: isRemovingCoupon(),\n    isApplyingCoupon: isApplyingCoupon(),\n    applyCoupon: checkoutService.applyCoupon,\n    removeCoupon: checkoutService.removeCoupon,\n  };\n}\n\nexport default withAnalytics(withLanguage(withCheckout(mapToDisCountCodeProps)(DiscountCode)));\n"],"names":["props","state","discountCode","couponCode","render","this","couponError","isRemovingCoupon","isApplyingCoupon","applyCoupon","removeCoupon","className","checkout","style","width","display","justifyContent","alignItems","TranslatedString","id","color","height","border","borderRadius","IconCheck","additionalClassName","disabled","onChange","e","setState","target","value","type","onClick","event","preventDefault","console","error","fontSize","paddingLeft","paddingTop","paddingRight","body","detail","Component","mapToDisCountCodeProps","checkoutService","checkoutState","getCoupons","getCheckout","getApplyCouponError","getRemoveCouponError","find","coupon","code","withAnalytics","withLanguage","withCheckout","DiscountCode"],"sourceRoot":""}