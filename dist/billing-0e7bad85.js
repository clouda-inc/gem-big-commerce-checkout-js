"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[876],{88870:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(97582),a=n(91074);function i(e,t){return!(!e||!t)&&((0,a.isEqual)(r(e),r(t))&&function(e,t){if(e.stateOrProvince&&e.stateOrProvince===t.stateOrProvince)return!0;if(e.stateOrProvinceCode&&e.stateOrProvinceCode===t.stateOrProvinceCode)return!0;return e.stateOrProvince===t.stateOrProvince&&e.stateOrProvinceCode===t.stateOrProvinceCode}(e,t))}function r(e){return(0,a.omit)((0,s.__assign)((0,s.__assign)({},e),{customFields:(e.customFields||[]).filter((function(e){return!!e.fieldValue}))}),["id","shouldSaveAddress","stateOrProvince","stateOrProvinceCode","type","email","country"])}},95593:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(97582),a=n(19945);function i(e){var t=e.customFields,n=(0,s.__rest)(e,["customFields"]),i=e.shouldSaveAddress;return(0,s.__assign)((0,s.__assign)({},n),{shouldSaveAddress:i,customFields:(0,a.Z)(t)})}},36115:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var s=n(97582),a=n(91074),i=n(67627),r=n(92574),l=n(19053),d=n(95593),o=n(88870),c=n(69638),u=n(55409),m=n(76741),g=n(74161),p=n(98119),v=n(76417),h=n(19686),_=n(56204),f=n(31478),b=n(46964),E=n(96543),y=n(34323),C=n(17175),N=n(60452),A=n(16206),S=n(78379),Z=n(45855),P=n(77683);const k=(0,_.Z)((0,v.withFormik)({handleSubmit:function(e,t){(0,t.props.onSubmit)(e)},mapPropsToValues:function(e){var t=e.getFields,n=e.customerMessage,a=e.billingAddress;return(0,s.__assign)((0,s.__assign)({},(0,E.Z)(t(a&&a.countryCode),a)),{orderComment:n})},isInitialValid:function(e){var t=e.billingAddress,n=e.getFields,s=e.language;return!!t&&(0,y.Z)({language:s,formFields:n(t.countryCode)}).isValidSync(t)},validationSchema:function(e){var t=e.language,n=e.getFields;return"amazonpay"===e.methodId?(0,h.Vo)((function(e){return(0,C.Z)({translate:(0,y.w)(t),formFields:n(e&&e.countryCode)})})):(0,h.Vo)((function(e){return(0,y.Z)({language:t,formFields:n(e&&e.countryCode)})}))},enableReinitialize:!0})((function(e){var t,n,a,d,c,u=e.billingAddress,m=e.customer.addresses,g=e.countries,p=e.isUpdating,v=e.methodId,h=e.updateAddress,_=e.onUnhandledError,E=e.selectedShippingAddress,y=(0,i.useState)(!1),C=y[0],k=y[1],O=(0,i.useRef)(null),F=(0,f.Z)(),I=F.isPayPalFastlaneEnabled,U=F.paypalFastlaneAddresses,w="amazonpay"===v,x=I?U:m,B=(null==x?void 0:x.length)>0,z=JSON.parse(localStorage.getItem("billingAddress")||"{}"),L=(0,i.useState)(!1),M=L[0],V=L[1];console.log("[checkout] billingAddress : ",u);var J=(0,i.useState)((0,s.__assign)((0,s.__assign)({},z),{countryCode:"US"})),R=J[0],D=J[1];(0,i.useEffect)((function(){console.log("addressInStore : ",z),D((0,s.__assign)((0,s.__assign)({},z),{countryCode:"US",company:""}))}),[]);return i.createElement(A.Z,{autoComplete:"on"},w&&u&&i.createElement("div",{className:"form-fieldset"},i.createElement(P.Z,{address:u})),i.createElement(S.Z,{id:"checkoutBillingAddress",ref:O},B&&!w&&!M&&i.createElement(S.Z,{id:"billingAddresses"},i.createElement(Z.Z,{isLoading:C},i.createElement("div",{className:"custom-billing-address-list"},[(0,s.__assign)({},E),(0,s.__assign)({},R)].map((function(e,t){return i.createElement("div",{className:"custom-billing-address-container",key:t,onClick:function(){return function(e){return(0,s.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:k(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,h(e)];case 2:return n.sent(),[3,5];case 3:return(t=n.sent())instanceof Error&&_(t),[3,5];case 4:return k(!1),[7];case 5:return[2]}}))}))}(e)}},i.createElement("div",{className:"custom-billing-address"},i.createElement("input",{checked:(0,o.Z)(e,u),className:"billing-address-input",type:"radio"}),i.createElement("div",{className:"billing-address-container"},i.createElement(b.Z,{address:e}))),(0,o.Z)(e,E)&&i.createElement("div",{className:"billing-addres-same-shipping-label"},"same as shipping address"),(0,o.Z)(e,R)&&i.createElement("div",{className:"billing-addres-edit-label",onClick:function(){return V(!0)}},"edit"))}))))),M&&i.createElement(l.Z,{isLoading:C},i.createElement("form",{onSubmit:function(e){e.preventDefault()}},i.createElement("div",{className:"temp-billing-address-container"},i.createElement("div",{className:"temp-billing-address-name-container"},i.createElement("div",{className:"temp-billing-address-firstname"},i.createElement("input",{className:"temp-billing-address-firstname-input",id:"firstName",name:"firstName",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{firstName:e.target.value}))},placeholder:"First Name",type:"text",value:R.firstName})),i.createElement("div",{className:"temp-billing-address-lastname"},i.createElement("input",{className:"temp-billing-address-lastname-input",id:"lastName",name:"lastName",onChange:function(e){D((0,s.__assign)((0,s.__assign)({},R),{lastName:e.target.value}))},placeholder:"Last Name",type:"text",value:R.lastName}))),i.createElement("div",{className:"temp-billing-address1-container"},i.createElement("input",{className:"temp-billing-address1-input",id:"address1",name:"address1",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{address1:e.target.value}))},placeholder:"Address",type:"text",value:R.address1})),i.createElement("div",{className:"temp-billing-address2-container"},i.createElement("input",{className:"temp-billing-address2-input",id:"address2",name:"address2",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{address2:e.target.value}))},placeholder:"Address",type:"text",value:R.address2})),i.createElement("div",{className:"temp-billing-address-country-container"},i.createElement("select",{className:"temp-billing-address-country-select",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{countryCode:e.target.value}))},value:R.countryCode||"US"},g.map((function(e){return i.createElement("option",{key:e.code,value:e.code},e.name)})))),i.createElement("div",{className:"temp-billing-address-state-city-container"},i.createElement("div",{className:"temp-billing-address-state"},(null===(a=null!==(n=null===(t=null==g?void 0:g.find((function(e){return e.code===R.countryCode})))||void 0===t?void 0:t.subdivisions)&&void 0!==n?n:[])||void 0===a?void 0:a.length)>0?i.createElement("div",{className:"temp-billing-address-state-container"},i.createElement("select",{className:"temp-billing-address-state-select",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{stateOrProvince:e.target.value}))},value:R.stateOrProvince},(null!==(c=null===(d=null==g?void 0:g.find((function(e){return e.code===R.countryCode})))||void 0===d?void 0:d.subdivisions)&&void 0!==c?c:[]).map((function(e){return i.createElement("option",{key:e.code,value:e.code},e.name)})))):i.createElement("div",{className:"temp-billing-address-state-container"},i.createElement("input",{className:"temp-billing-address-state-select",id:"stateOrProvince",name:"stateOrProvince",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{stateOrProvince:e.target.value}))},placeholder:"State Or Province",type:"text",value:R.stateOrProvince}))),i.createElement("div",{className:"temp-billing-address-city-container"},i.createElement("input",{className:"temp-billing-address-city-input",id:"city",name:"city",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{city:e.target.value}))},placeholder:"City",type:"text",value:R.city}))),i.createElement("div",{className:"temp-billing-address-postalcode-phone-container"},i.createElement("div",{className:"temp-billing-address-postalcode-container"},i.createElement("input",{className:"temp-billing-address-postalcode-input",id:"postalCode",name:"postalCode",onChange:function(e){return D((0,s.__assign)((0,s.__assign)({},R),{postalCode:e.target.value}))},placeholder:"Postal Code",type:"text",value:R.postalCode})),i.createElement("div",{className:"temp-billing-address-phone-container"},i.createElement("input",{className:"temp-billing-address-phone-input",id:"phone",name:"phone",onChange:function(e){D((0,s.__assign)((0,s.__assign)({},R),{phone:e.target.value}))},placeholder:"Phone",type:"text",value:R.phone}))),i.createElement("div",{className:"temp-billing-address-button-container"},i.createElement("button",{className:"temp-billing-address-cancel-button",onClick:function(){return V(!1)}},"Cancel"),i.createElement("button",{className:"temp-billing-address-save-button",type:"submit"},"Save")))))),i.createElement("div",{className:"form-actions"},i.createElement(N.ZP,{disabled:p||C,id:"checkout-billing-continue",isLoading:p||C,type:"submit",variant:N.Wu.Primary},i.createElement(r.Z,{id:"common.continue_action"}))))})));var O=n(41957);function F(e){var t=(0,O.Z)(e);return t&&["amazonpay"].indexOf(t.providerId)>-1?t.providerId:void 0}var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSubmit=function(e){return(0,s.__awaiter)(t,void 0,void 0,(function(){var t,n,a,i,r,l,c,u,m,g,p=e.orderComment,v=(0,s.__rest)(e,["orderComment"]);return(0,s.__generator)(this,(function(e){switch(e.label){case 0:t=this.props,n=t.updateAddress,a=t.updateCheckout,i=t.customerMessage,r=t.billingAddress,l=t.navigateNextStep,c=t.onUnhandledError,u=[],(m=(0,d.Z)(v))&&!(0,o.Z)(m,r)&&u.push(n(m)),i!==p&&u.push(a({customerMessage:p})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(u)];case 2:return e.sent(),l(),[3,4];case 3:return(g=e.sent())instanceof Error&&c(g),[3,4];case 4:return[2]}}))}))},t}return(0,s.__extends)(t,e),t.prototype.componentDidMount=function(){return(0,s.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,r,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:e=this.props,t=e.initialize,n=e.onReady,i=void 0===n?a.noop:n,r=e.onUnhandledError,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,t()];case 2:return s.sent(),i(),[3,4];case 3:return(l=s.sent())instanceof Error&&r(l),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this.props,t=e.updateAddress,n=e.isInitializing,a=e.selectedShippingAddress,d=(0,s.__rest)(e,["updateAddress","isInitializing","selectedShippingAddress"]);return console.log("selectedShippingAddress : ",a),console.log("[this.props] billingAddress : ",this.props.billingAddress),i.createElement(l.Z,{isLoading:n},i.createElement("div",{className:"checkout-form"},i.createElement("div",{className:"form-legend-container"},i.createElement(p.Z,{testId:"billing-address-heading"},i.createElement(r.Z,{id:"billing.billing_address_heading"}))),i.createElement(k,(0,s.__assign)({},d,{onSubmit:this.handleSubmit,selectedShippingAddress:a,updateAddress:t}))))},t}(i.Component);const U=(0,c.Z)((function(e){var t=e.checkoutService,n=e.checkoutState,s=n.data,a=s.getCheckout,i=s.getConfig,r=s.getCart,l=s.getCustomer,d=s.getBillingAddress,o=s.getBillingAddressFields,c=s.getBillingCountries,p=s.getShippingAddress,v=n.statuses,h=v.isLoadingBillingCountries,_=v.isUpdatingBillingAddress,f=v.isUpdatingCheckout,b=i(),E=l(),y=a(),C=r();if(!(b&&E&&y&&C))return null;var N=b.checkoutSettings,A=N.enableOrderComments,S=N.googleMapsApiKey;return{billingAddress:d(),countries:c()||u.L,countriesWithAutocomplete:["US","CA","AU","NZ","GB"],customer:E,customerMessage:y.customerMessage,getFields:o,googleMapsApiKey:S,initialize:t.loadBillingAddressFields,isInitializing:h(),isUpdating:_()||f(),methodId:F(y),shouldShowOrderComments:A&&(0,g.Z)(C)<1,updateAddress:t.updateBillingAddress,updateCheckout:t.updateCheckout,isFloatingLabelEnabled:(0,m.Z)(b.checkoutSettings),selectedShippingAddress:p()||{}}}))(I)},41957:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(10631),a=n(56851);function i(e){return(e&&e.payments?e.payments:[]).find((function(e){return!(0,s.Z)(e)&&!(0,a.Z)(e)&&!!e.providerId}))}},74161:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(92304);function a(e){return(0,s.Z)(e.lineItems.physicalItems.filter((function(e){return!e.addedByPromotion})))}}}]);
//# sourceMappingURL=billing-0e7bad85.js.map