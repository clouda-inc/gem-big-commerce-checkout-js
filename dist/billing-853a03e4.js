"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[876],{95593:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(97582),a=t(19945);function s(e){var n=e.customFields,t=(0,i.__rest)(e,["customFields"]),s=e.shouldSaveAddress;return(0,i.__assign)((0,i.__assign)({},t),{shouldSaveAddress:s,customFields:(0,a.Z)(n)})}},36115:(e,n,t)=>{t.r(n),t.d(n,{default:()=>B});var i=t(97582),a=t(91074),s=t(67627),r=t(92574),l=t(19053),o=t(95593),d=t(88870),c=t(69638),u=t(55409),m=t(76741),v=t(74161),g=t(98119),p=t(76417),f=t(19686),_=t(56204),h=t(31478),E=t(33497),b=t(46964),y=t(96543),C=t(34323),N=t(92576),A=t(27359),S=t(82100),Z=t(17175),P=t(26033),O=t(16206),k=t(78379),U=t(29864),F=t(58643);const I=(0,_.Z)((0,p.withFormik)({handleSubmit:function(e,n){(0,n.props.onSubmit)(e)},mapPropsToValues:function(e){var n=e.getFields,t=e.customerMessage,a=e.billingAddress;return(0,i.__assign)((0,i.__assign)({},(0,y.Z)(n(a&&a.countryCode),a)),{orderComment:t})},isInitialValid:function(e){var n=e.billingAddress,t=e.getFields,i=e.language;return!!n&&(0,C.Z)({language:i,formFields:t(n.countryCode)}).isValidSync(n)},validationSchema:function(e){var n=e.language,t=e.getFields;return"amazonpay"===e.methodId?(0,f.Vo)((function(e){return(0,Z.Z)({translate:(0,C.w)(n),formFields:t(e&&e.countryCode)})})):(0,f.Vo)((function(e){return(0,C.Z)({language:n,formFields:t(e&&e.countryCode)})}))},enableReinitialize:!0})((function(e){var n,t,a,o,c,u,m=e.googleMapsApiKey,v=e.billingAddress,g=e.countries,p=e.isUpdating,f=e.methodId,_=e.updateAddress,y=e.onUnhandledError,C=e.selectedShippingAddress,Z=e.navigateNextStep,I=(0,s.useState)(!1),w=I[0],L=I[1],M=(0,s.useRef)(null),B=(0,h.Z)(),z=B.isPayPalFastlaneEnabled,x=B.paypalFastlaneAddresses,K="amazonpay"===f,D=JSON.parse(localStorage.getItem("billingAddress")||"{}"),J=(0,s.useState)(!1),V=J[0],R=J[1],W=(0,s.useState)((0,i.__assign)((0,i.__assign)({},D),{countryCode:"US",stateOrProvince:(null==D?void 0:D.stateOrProvince)||"Alabama",stateOrProvinceCode:(null==D?void 0:D.stateOrProvinceCode)||"AL"})),$=W[0],G=W[1],T=(0,s.useState)(v),j=T[0],q=T[1],H=(0,s.useState)({input:"",error:!1,type:"noError"}),Q=H[0],X=H[1],Y=[(0,i.__assign)({},C),(0,i.__assign)({},$)].filter((function(e){var n,t,i;return(0,E.Z)(e,[])&&!!e.firstName&&""!==e.firstName&&!!e.lastName&&""!==e.lastName&&((null===(n=null==e?void 0:e.address1)||void 0===n?void 0:n.length)||0)>0&&((null===(t=null==e?void 0:e.city)||void 0===t?void 0:t.length)||0)>0&&((null===(i=null==e?void 0:e.postalCode)||void 0===i?void 0:i.length)||0)>0})),ee=z?x:Y,ne=(null==ee?void 0:ee.length)>0,te=v.email;(0,s.useEffect)((function(){G((0,i.__assign)((0,i.__assign)({},D),{countryCode:"US",company:"",stateOrProvince:(null==D?void 0:D.stateOrProvince)||"Alabama",stateOrProvinceCode:(null==D?void 0:D.stateOrProvinceCode)||"AL"}))}),[]),(0,s.useEffect)((function(){q(v)}),[v]);var ie=function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:L(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,_((0,i.__assign)((0,i.__assign)({},e),{email:te}))];case 2:return t.sent(),Z(),[3,5];case 3:return(n=t.sent())instanceof Error&&y(n),[3,5];case 4:return L(!1),[7];case 5:return[2]}}))}))};return s.createElement(O.Z,{autoComplete:"on",className:"billing-address-form"},K&&v&&s.createElement("div",{className:"form-fieldset"},s.createElement(F.Z,{address:v,isEditable:!1,onEdit:function(){},showSameAsShippingLable:(0,d.Z)(v,C),type:null===N.Z||void 0===N.Z?void 0:N.Z.Billing})),s.createElement("div",{className:"billing-address-add-new-container"},s.createElement("div",{className:"billing-address-add-new",onClick:function(e){e.preventDefault(),R(!0),G((0,i.__assign)((0,i.__assign)({},$),{firstName:"",lastName:"",address1:"",address2:"",city:"",postalCode:"",countryCode:"US",stateOrProvince:"Alabama",stateOrProvinceCode:"AL"}))}},"Add new Address")),s.createElement(k.Z,{id:"checkoutBillingAddress",ref:M},ne&&!K&&!V&&s.createElement(k.Z,{id:"billingAddresses"},s.createElement(U.Z,{isLoading:w},s.createElement("div",{className:"custom-billing-address-list"},Y.map((function(e,n){return s.createElement("div",{className:"custom-billing-address-container",key:n},s.createElement("div",{className:"custom-billing-address",onClick:function(n){n.preventDefault(),ie((0,i.__assign)((0,i.__assign)({},e),{id:null==v?void 0:v.id}))}},s.createElement("input",{checked:(0,d.Z)(e,j),className:"billing-address-input",type:"radio"}),s.createElement("div",{className:"billing-address-container"},s.createElement(b.Z,{address:e}))),(0,d.Z)(e,C)&&s.createElement("div",{className:"billing-addres-same-shipping-label"},"same as shipping address"),(0,d.Z)(e,$)&&s.createElement("div",{className:"billing-addres-edit-label",onClick:function(e){e.preventDefault(),R(!0),e.stopPropagation()}},"edit"))}))))),V&&s.createElement(l.Z,{isLoading:w},s.createElement("div",null,s.createElement("div",{className:"temp-billing-address-container"},s.createElement("div",{className:"temp-billing-address-name-container"},s.createElement("div",{className:"temp-billing-address-firstname"},s.createElement(S.U,{id:"firstName",name:"firstName",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{firstName:e.target.value}))},title:"First Name",value:$.firstName})),s.createElement("div",{className:"temp-billing-address-lastname"},s.createElement(S.U,{id:"lastName",name:"lastName",onChange:function(e){G((0,i.__assign)((0,i.__assign)({},$),{lastName:e.target.value}))},title:"Last Name",value:$.lastName}))),s.createElement("div",{className:"temp-billing-address1-container"},m?s.createElement(A.Z,{googleMapsApiKey:m,libraries:["places"],onAddressSelect:function(e){var n,t,a,s,r,l,o,d,c,u,m=null==e?void 0:e.name,v=null==e?void 0:e.vicinity,g=null===(t=null===(n=null==e?void 0:e.address_components)||void 0===n?void 0:n.find((function(e){var n;return null===(n=e.types)||void 0===n?void 0:n.find((function(e){return"administrative_area_level_2"===e}))})))||void 0===t?void 0:t.long_name,p=null===(s=null===(a=null==e?void 0:e.address_components)||void 0===a?void 0:a.find((function(e){var n;return null===(n=e.types)||void 0===n?void 0:n.find((function(e){return"administrative_area_level_1"===e}))})))||void 0===s?void 0:s.long_name,f=null===(l=null===(r=null==e?void 0:e.address_components)||void 0===r?void 0:r.find((function(e){var n;return null===(n=e.types)||void 0===n?void 0:n.find((function(e){return"administrative_area_level_1"===e}))})))||void 0===l?void 0:l.short_name,_=null===(d=null===(o=null==e?void 0:e.address_components)||void 0===o?void 0:o.find((function(e){var n;return null===(n=e.types)||void 0===n?void 0:n.find((function(e){return"country"===e}))})))||void 0===d?void 0:d.short_name,h=null===(u=null===(c=null==e?void 0:e.address_components)||void 0===c?void 0:c.find((function(e){var n;return null===(n=e.types)||void 0===n?void 0:n.find((function(e){return"postal_code"===e}))})))||void 0===u?void 0:u.long_name;G((0,i.__assign)((0,i.__assign)({},$),{address1:m,address2:v,city:g,stateOrProvince:p,stateOrProvinceCode:f,countryCode:_,postalCode:h}))},onChange:function(e){G((0,i.__assign)((0,i.__assign)({},$),{address1:e}))},title:"Address 1",value:null!==(n=null==$?void 0:$.address1)&&void 0!==n?n:""}):s.createElement(S.U,{id:"address1",name:"address1",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{address1:e.target.value}))},title:"Address",value:$.address1})),s.createElement("div",{className:"temp-billing-address2-container"},s.createElement(S.U,{id:"address2",name:"address2",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{address2:e.target.value}))},title:"Address",value:$.address2})),s.createElement("div",{className:"temp-billing-address-country-container"},s.createElement("select",{className:"temp-billing-address-country-select",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{countryCode:e.target.value}))},value:$.countryCode||"US"},g.map((function(e){return s.createElement("option",{key:e.code,value:e.code},e.name)})))),s.createElement("div",{className:"temp-billing-address-state-city-container"},s.createElement("div",{className:"temp-billing-address-state"},(null===(o=null!==(a=(null==g?void 0:g.find((function(e){return e.code===$.countryCode})))&&(null===(t=null==g?void 0:g.find((function(e){return e.code===$.countryCode})))||void 0===t?void 0:t.subdivisions))&&void 0!==a?a:[])||void 0===o?void 0:o.length)>0?s.createElement("div",{className:"temp-billing-address-state-container"},s.createElement("select",{className:"temp-billing-address-state-select",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{stateOrProvince:e.target.value}))},value:$.stateOrProvinceCode},(null!==(u=null===(c=null==g?void 0:g.find((function(e){return e.code===$.countryCode})))||void 0===c?void 0:c.subdivisions)&&void 0!==u?u:[]).map((function(e){return s.createElement("option",{key:e.code,value:e.code},e.name)})))):s.createElement("div",{className:"temp-billing-address-state-container"},s.createElement(S.U,{id:"stateOrProvince",name:"stateOrProvince",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{stateOrProvince:e.target.value}))},title:"State Or Province",value:$.stateOrProvince}))),s.createElement("div",{className:"temp-billing-address-city-container"},s.createElement(S.U,{id:"city",name:"city",onChange:function(e){return G((0,i.__assign)((0,i.__assign)({},$),{city:e.target.value}))},title:"City",value:$.city}))),s.createElement("div",{className:"temp-billing-address-postalcode-phone-container"},s.createElement("div",{className:"temp-billing-address-postalcode-container"},s.createElement(S.U,{id:"postalCode",name:"postalCode",onChange:function(e){var n=e.target.value;/^[#.0-9a-zA-Z\s-]{4,12}$/.test(n)?X({input:"postalCode",error:!1,type:"noError"}):X({input:"postalCode",error:!0,type:"validationMessage"}),G((0,i.__assign)((0,i.__assign)({},$),{postalCode:n}))},title:"Postal Code",value:$.postalCode}),"postalCode"===Q.input&&Q.error&&s.createElement("div",{className:"form-field-error-message"},"Enter a valid postal code")),s.createElement("div",{className:"temp-billing-address-phone-container"},s.createElement(S.U,{id:"phone",name:"phone",onChange:function(e){var n=e.target.value;G((0,i.__assign)((0,i.__assign)({},$),{phone:n})),n.length>0?/^\+[1-9]{1}[0-9]{9,14}$/.test(n)?X({input:"phone",error:!1,type:"noError"}):X({input:"phone",error:!0,type:"validationMessage"}):X({input:"phone",error:!1,type:"noError"})},title:"Phone",value:$.phone}),"phone"===Q.input&&Q.error&&s.createElement("div",{className:"form-field-error-message"},"Enter a valid phone number"))),s.createElement("div",{className:"temp-billing-address-button-container"},s.createElement("button",{className:"temp-billing-address-cancel-button",onClick:function(){return R(!1)},type:"button"},"Cancel"),s.createElement("button",{className:"temp-billing-address-save-button",onClick:function(e){var n,t,a,s,r,l,o;if(e.preventDefault(),!(null==Q?void 0:Q.error)){var d=(0,i.__assign)((0,i.__assign)({},$),{country:null===(n=g.find((function(e){return e.code===$.countryCode})))||void 0===n?void 0:n.name,stateOrProvince:null!==(s=null===(a=null===(t=g.find((function(e){return e.code===$.countryCode})))||void 0===t?void 0:t.subdivisions.find((function(e){return e.code===$.stateOrProvince})))||void 0===a?void 0:a.name)&&void 0!==s?s:$.stateOrProvince,stateOrProvinceCode:null!==(o=null===(l=null===(r=g.find((function(e){return e.code===$.countryCode})))||void 0===r?void 0:r.subdivisions.find((function(e){return e.code===$.stateOrProvince})))||void 0===l?void 0:l.code)&&void 0!==o?o:$.stateOrProvinceCode});localStorage.setItem("billingAddress",JSON.stringify(d)),ie((0,i.__assign)((0,i.__assign)({},$),{id:null==v?void 0:v.id})),R(!1)}},type:"button"},"Save")))))),s.createElement("div",{className:"form-actions"},s.createElement(P.ZP,{disabled:p||w,id:"checkout-billing-continue",isLoading:p||w,type:"submit",variant:P.Wu.Primary},s.createElement(r.Z,{id:"common.continue_action"}))))})));var w=t(64710);function L(e){var n=(0,w.Z)(e);return n&&["amazonpay"].indexOf(n.providerId)>-1?n.providerId:void 0}var M=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleSubmit=function(e){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n,t,a,s,r,l,c,u,m,v,g=e.orderComment,p=(0,i.__rest)(e,["orderComment"]);return(0,i.__generator)(this,(function(e){switch(e.label){case 0:n=this.props,t=n.updateAddress,a=n.updateCheckout,s=n.customerMessage,r=n.billingAddress,l=n.navigateNextStep,c=n.onUnhandledError,u=[],(m=(0,o.Z)(p))&&!(0,d.Z)(m,r)&&u.push(t(m)),s!==g&&u.push(a({customerMessage:g})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(u)];case 2:return e.sent(),l(),[3,4];case 3:return(v=e.sent())instanceof Error&&c(v),[3,4];case 4:return[2]}}))}))},n}return(0,i.__extends)(n,e),n.prototype.componentDidMount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,t,s,r,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=this.props,n=e.initialize,t=e.onReady,s=void 0===t?a.noop:t,r=e.onUnhandledError,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n()];case 2:return i.sent(),s(),[3,4];case 3:return(l=i.sent())instanceof Error&&r(l),[3,4];case 4:return[2]}}))}))},n.prototype.render=function(){var e=this.props,n=e.updateAddress,t=e.isInitializing,a=e.selectedShippingAddress,o=(0,i.__rest)(e,["updateAddress","isInitializing","selectedShippingAddress"]);return s.createElement(l.Z,{isLoading:t},s.createElement("div",{className:"checkout-form"},s.createElement("div",{className:"form-legend-container"},s.createElement(g.Z,{testId:"billing-address-heading"},s.createElement(r.Z,{id:"billing.billing_address_heading"}))),s.createElement(I,(0,i.__assign)({},o,{onSubmit:this.handleSubmit,selectedShippingAddress:a,updateAddress:n}))))},n}(s.Component);const B=(0,c.Z)((function(e){var n=e.checkoutService,t=e.checkoutState,i=t.data,a=i.getCheckout,s=i.getConfig,r=i.getCart,l=i.getCustomer,o=i.getBillingAddress,d=i.getBillingAddressFields,c=i.getBillingCountries,g=i.getShippingAddress,p=t.statuses,f=p.isLoadingBillingCountries,_=p.isUpdatingBillingAddress,h=p.isUpdatingCheckout,E=s(),b=l(),y=a(),C=r();if(!(E&&b&&y&&C))return null;var N=E.checkoutSettings,A=N.enableOrderComments,S=N.googleMapsApiKey;return{billingAddress:o(),countries:c()||u.L,countriesWithAutocomplete:["US","CA","AU","NZ","GB"],customer:b,customerMessage:y.customerMessage,getFields:d,googleMapsApiKey:S,initialize:n.loadBillingAddressFields,isInitializing:f(),isUpdating:_()||h(),methodId:L(y),shouldShowOrderComments:A&&(0,v.Z)(C)<1,updateAddress:n.updateBillingAddress,updateCheckout:n.updateCheckout,isFloatingLabelEnabled:(0,m.Z)(E.checkoutSettings),selectedShippingAddress:g()||{}}}))(M)},27359:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(49479),a=t(67627);const s=function(e){var n=e.libraries,t=e.title,s=e.googleMapsApiKey,r=e.value,l=e.onChange,o=e.onAddressSelect,d=(0,a.useRef)(null),c=(0,i.Ji)({id:"google-map-script",googleMapsApiKey:s,libraries:n}).isLoaded;return a.createElement(a.Fragment,null,c&&a.createElement(i.Zk,{onLoad:function(e){return d.current=e},onPlacesChanged:function(){if(d.current){var e=d.current.getPlaces();if(!e)return;o(e[0])}}},a.createElement("div",{className:"google-autocomplete-container"},a.createElement("div",{className:"google-autocomplete-entryarea"},a.createElement("input",{className:"google-autocomplete-input-field-input",onChange:function(e){return l(e.target.value)},placeholder:"",type:"text",value:r}),a.createElement("div",{className:"google-autocomplete-labelline"},t)))))}},82100:(e,n,t)=>{t.d(n,{U:()=>s});var i=t(97582),a=t(67627),s=function(e){var n=e.id,t=e.name,s=e.title,r=e.value,l=e.onChange,o=(0,i.__rest)(e,["id","name","title","value","onChange"]);return a.createElement("div",{className:"container"},a.createElement("div",{className:"entryarea"},a.createElement("input",(0,i.__assign)({},o,{className:"input-field-input",id:n,name:t,onChange:l,placeholder:"",type:"text",value:r})),a.createElement("div",{className:"labelline"},s)))}},64710:(e,n,t)=>{function i(e){return(e&&e.payments?e.payments:[]).find((function(e){return!function(e){return"giftcertificate"===e.providerId}(e)&&!function(e){return"storecredit"===e.providerId}(e)&&!!e.providerId}))}t.d(n,{Z:()=>i})},74161:(e,n,t)=>{t.d(n,{Z:()=>a});var i=t(92304);function a(e){return(0,i.Z)(e.lineItems.physicalItems.filter((function(e){return!e.addedByPromotion})))}}}]);
//# sourceMappingURL=billing-853a03e4.js.map